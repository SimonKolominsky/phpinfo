<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link href="/../deepseek.css" rel="stylesheet">

</head>
<body>
<div class="ds-markdown ds-markdown--block" style="--ds-md-zoom: 1.143;"><p><strong>Селективность в базах
    данных</strong> — это показатель, который характеризует, насколько эффективно индекс или условие фильтрации отбирает
    данные из таблицы. Селективность помогает оптимизатору запросов выбирать оптимальный план выполнения запроса,
    оценивая, сколько строк будет возвращено в результате применения условия.</p>
    <h3>Определение селективности</h3>
    <p>Селективность вычисляется как отношение количества уникальных значений в столбце к общему количеству строк в
        таблице:</p><span class="katex-display ds-markdown-math"><span class="katex"><span class="katex-mathml"><math
            xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Селективность</mtext><mo>=</mo><mfrac><mtext>Количество&nbsp;уникальных&nbsp;значений</mtext><mtext>Общее&nbsp;количество&nbsp;строк</mtext></mfrac></mrow><annotation
            encoding="application/x-tex">\text{Селективность} = \frac{\text{Количество уникальных значений}}{\text{Общее количество строк}}</annotation></semantics></math></span><span
            class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                           style="height:0.6833em;"></span><span
            class="mord text"><span class="mord cyrillic_fallback">Селективность</span></span><span class="mspace"
                                                                                                    style="margin-right:0.2778em;"></span><span
            class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span
            class="base"><span class="strut" style="height:2.2408em;vertical-align:-0.8804em;"></span><span
            class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span
            class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span
            style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span
            class="mord text"><span class="mord cyrillic_fallback">Общее</span><span class="mord">&nbsp;</span><span
            class="mord cyrillic_fallback">количество</span><span class="mord">&nbsp;</span><span
            class="mord cyrillic_fallback">строк</span></span></span></span><span style="top:-3.23em;"><span
            class="pstrut" style="height:3em;"></span><span class="frac-line"
                                                            style="border-bottom-width:0.04em;"></span></span><span
            style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span
            class="mord text"><span class="mord cyrillic_fallback">Количество</span><span
            class="mord">&nbsp;</span><span class="mord cyrillic_fallback">уникальных</span><span
            class="mord">&nbsp;</span><span
            class="mord cyrillic_fallback">значений</span></span></span></span></span><span
            class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist"
                                                                       style="height:0.8804em;"><span></span></span></span></span></span><span
            class="mclose nulldelimiter"></span></span></span></span></span></span>
    <ul>
        <li><p>Если селективность близка к <strong>1</strong> (например, уникальный ключ), это означает, что условие
            фильтрации возвращает очень мало строк.</p></li>
        <li><p>Если селективность близка к <strong>0</strong>, это означает, что условие фильтрации возвращает много
            строк (например, столбец с повторяющимися значениями).</p></li>
    </ul>
    <h3>Пример</h3>
    <p>Предположим, у нас есть таблица <code>users</code> с 1000 строк и столбцом <code>gender</code>, который содержит
        два уникальных значения: <code>male</code> и <code>female</code>.</p>
    <ul>
        <li><p>Селективность для столбца <code>gender</code>:</p><span class="katex-display ds-markdown-math"><span
                class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"
                                                               display="block"><semantics><mrow><mtext>Селективность</mtext><mo>=</mo><mfrac><mn>2</mn><mn>1000</mn></mfrac><mo>=</mo><mn>0.002</mn></mrow><annotation
                encoding="application/x-tex">\text{Селективность} = \frac{2}{1000} = 0.002</annotation></semantics></math></span><span
                class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                               style="height:0.6833em;"></span><span
                class="mord text"><span class="mord cyrillic_fallback">Селективность</span></span><span class="mspace"
                                                                                                        style="margin-right:0.2778em;"></span><span
                class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span
                class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span
                class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span
                class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span
                style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span
                class="mord">1000</span></span></span><span style="top:-3.23em;"><span class="pstrut"
                                                                                       style="height:3em;"></span><span
                class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span
                class="pstrut" style="height:3em;"></span><span class="mord"><span
                class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span
                class="vlist-r"><span class="vlist"
                                      style="height:0.686em;"><span></span></span></span></span></span><span
                class="mclose nulldelimiter"></span></span><span class="mspace"
                                                                 style="margin-right:0.2778em;"></span><span
                class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span
                class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.002</span></span></span></span></span>
            <p>Это низкая селективность, так как условие фильтрации по полу вернет много строк.</p></li>
        <li><p>Если в таблице есть столбец <code>user_id</code> с уникальными значениями:</p><span
                class="katex-display ds-markdown-math"><span class="katex"><span class="katex-mathml"><math
                xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Селективность</mtext><mo>=</mo><mfrac><mn>1000</mn><mn>1000</mn></mfrac><mo>=</mo><mn>1</mn></mrow><annotation
                encoding="application/x-tex">\text{Селективность} = \frac{1000}{1000} = 1</annotation></semantics></math></span><span
                class="katex-html" aria-hidden="true"><span class="base"><span class="strut"
                                                                               style="height:0.6833em;"></span><span
                class="mord text"><span class="mord cyrillic_fallback">Селективность</span></span><span class="mspace"
                                                                                                        style="margin-right:0.2778em;"></span><span
                class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span
                class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span
                class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span
                class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span
                style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span
                class="mord">1000</span></span></span><span style="top:-3.23em;"><span class="pstrut"
                                                                                       style="height:3em;"></span><span
                class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span
                class="pstrut" style="height:3em;"></span><span class="mord"><span
                class="mord">1000</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span
                class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span
                class="mclose nulldelimiter"></span></span><span class="mspace"
                                                                 style="margin-right:0.2778em;"></span><span
                class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span
                class="base"><span class="strut" style="height:0.6444em;"></span><span
                class="mord">1</span></span></span></span></span>
            <p>Это высокая селективность, так как условие фильтрации по <code>user_id</code> вернет только одну строку.
            </p></li>
    </ul>
    <h3>Применение селективности</h3>
    <ol start="1">
        <li><p><strong>Выбор индексов</strong>:</p>
            <ul>
                <li><p>Высокая селективность (близкая к 1) делает индекс более полезным, так как он эффективно сокращает
                    количество строк.</p></li>
                <li><p>Низкая селективность (близкая к 0) делает индекс менее полезным, так как он возвращает много
                    строк.</p></li>
            </ul>
        </li>
        <li><p><strong>Оптимизация запросов</strong>:</p>
            <ul>
                <li><p>Оптимизатор запросов использует селективность для выбора наиболее эффективного плана выполнения
                    запроса. Например, если условие имеет высокую селективность, оптимизатор может использовать
                    индексный поиск. Если селективность низкая, может быть выбран полный сканирование таблицы.</p></li>
            </ul>
        </li>
        <li><p><strong>Статистика</strong>:</p>
            <ul>
                <li><p>Базы данных собирают статистику по селективности столбцов, чтобы оптимизатор мог принимать
                    обоснованные решения.</p></li>
            </ul>
        </li>
    </ol>
    <h3>Как улучшить селективность</h3>
    <ul>
        <li><p>Используйте <strong>составные индексы</strong> для условий, которые часто используются вместе.</p></li>
        <li><p>Убедитесь, что статистика в базе данных актуальна, чтобы оптимизатор мог правильно оценивать
            селективность.</p></li>
        <li><p>Избегайте индексов на столбцах с низкой селективностью, если они не используются для других целей
            (например, для сортировки или соединений).</p></li>
    </ul>
    <p>Понимание селективности помогает проектировать эффективные базы данных и оптимизировать запросы.</p></div>
</body>
</html>
