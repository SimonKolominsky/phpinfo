<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link href="/../deepseek.css" rel="stylesheet">

</head>
<body>
<div class="ds-markdown ds-markdown--block" style="--ds-md-zoom: 1.143;"><p>Транзакции — это фундаментальное понятие в
    системах управления базами данных (СУБД) и распределенных системах. Они представляют собой набор операций, которые
    выполняются как единое целое, обеспечивая целостность и согласованность данных. Давайте разберем это понятие
    подробнее.</p>
    <hr>
    <h3><strong>Что такое транзакция?</strong></h3>
    <p>Транзакция — это последовательность операций (например, чтение, запись, изменение данных), которые выполняются
        как одна логическая единица работы. Транзакция либо завершается успешно (и все её изменения применяются), либо
        откатывается (и все изменения отменяются).</p>
    <p>Пример:</p>
    <ul>
        <li><p>Перевод денег с одного счета на другой:</p>
            <ol start="1">
                <li><p>Снять деньги с первого счета.</p></li>
                <li><p>Зачислить деньги на второй счет.<br>Обе операции должны быть выполнены вместе, иначе данные
                    станут несогласованными.</p></li>
            </ol>
        </li>
    </ul>
    <hr>
    <h3><strong>Свойства транзакций (ACID)</strong></h3>
    <p>Транзакции обладают четырьмя ключевыми свойствами, известными как ACID:</p>
    <ol start="1">
        <li><p><strong>Атомарность (Atomicity)</strong> — транзакция выполняется целиком или не выполняется вовсе.</p>
        </li>
        <li><p><strong>Согласованность (Consistency)</strong> — транзакция переводит базу данных из одного корректного
            состояния в другое.</p></li>
        <li><p><strong>Изолированность (Isolation)</strong> — параллельные транзакции не влияют друг на друга.</p></li>
        <li><p><strong>Долговечность (Durability)</strong> — результаты успешно завершенной транзакции сохраняются даже
            после сбоев.</p></li>
    </ol>
    <hr>
    <h3><strong>Жизненный цикл транзакции</strong></h3>
    <ol start="1">
        <li><p><strong>Начало транзакции</strong><br>Транзакция начинается с команды <code>BEGIN</code> или <code>START
            TRANSACTION</code> (в зависимости от СУБД).</p></li>
        <li><p><strong>Выполнение операций</strong><br>В рамках транзакции выполняются различные операции (например,
            <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>).</p></li>
        <li><p><strong>Завершение транзакции</strong></p>
            <ul>
                <li><p>Если все операции прошли успешно, транзакция завершается командой <code>COMMIT</code>. Все
                    изменения сохраняются в базе данных.</p></li>
                <li><p>Если произошла ошибка, транзакция откатывается командой <code>ROLLBACK</code>. Все изменения
                    отменяются.</p></li>
            </ul>
        </li>
        <li><p><strong>Откат (в случае сбоя)</strong><br>Если система crashes (например, из-за сбоя питания), СУБД
            автоматически откатывает незавершенные транзакции при восстановлении.</p></li>
    </ol>
    <hr>
    <h3><strong>Уровни изоляции транзакций</strong></h3>
    <p>Уровень изоляции определяет, насколько строго транзакции изолированы друг от друга. Чем выше уровень изоляции,
        тем строже контроль, но ниже производительность. Основные уровни:</p>
    <ol start="1">
        <li><p><strong>Read Uncommitted</strong> — транзакции могут видеть незафиксированные изменения других транзакций
            (возможны "грязные" чтения).</p></li>
        <li><p><strong>Read Committed</strong> — транзакции видят только зафиксированные данные.</p></li>
        <li><p><strong>Repeatable Read</strong> — гарантирует, что данные, прочитанные в рамках транзакции, не изменятся
            до её завершения.</p></li>
        <li><p><strong>Serializable</strong> — самый строгий уровень, транзакции выполняются так, как если бы они шли
            последовательно.</p></li>
    </ol>
    <hr>
    <h3><strong>Примеры использования транзакций</strong></h3>
    <ol start="1">
        <li><p><strong>Банковские операции</strong><br>Перевод денег между счетами должен быть атомарным и
            согласованным.</p></li>
        <li><p><strong>Бронирование билетов</strong><br>Если два пользователя одновременно пытаются забронировать
            последний билет, транзакция гарантирует, что только один из них получит его.</p></li>
        <li><p><strong>Интернет-магазины</strong><br>При оформлении заказа уменьшение количества товара на складе и
            создание заказа должны выполняться как одна транзакция.</p></li>
    </ol>
    <hr>
    <h3><strong>Проблемы параллельных транзакций</strong></h3>
    <p>При одновременном выполнении транзакций могут возникать проблемы:</p>
    <ol start="1">
        <li><p><strong>Потерянное обновление (Lost Update)</strong><br>Две транзакции одновременно изменяют одни и те же
            данные, и одно из изменений теряется.</p></li>
        <li><p><strong>"Грязное" чтение (Dirty Read)</strong><br>Транзакция читает незафиксированные данные другой
            транзакции, которая затем откатывается.</p></li>
        <li><p><strong>Неповторяющееся чтение (Non-Repeatable Read)</strong><br>Транзакция дважды читает одни и те же
            данные, но они изменяются другой транзакцией между чтениями.</p></li>
        <li><p><strong>Фантомное чтение (Phantom Read)</strong><br>Транзакция дважды выполняет запрос, но получает
            разный набор строк из-за вставки или удаления данных другой транзакцией.</p></li>
    </ol>
    <hr>
    <h3><strong>Транзакции в распределенных системах</strong></h3>
    <p>В распределенных системах (например, микросервисах или облачных базах данных) обеспечение ACID становится
        сложнее. Здесь используются протоколы, такие как <strong>Two-Phase Commit (2PC)</strong>, чтобы гарантировать
        согласованность данных между несколькими узлами.</p>
    <hr>
    <h3><strong>Когда транзакции не нужны?</strong></h3>
    <p>Транзакции могут быть избыточны в системах, где:</p>
    <ul>
        <li><p>Данные не критичны к согласованности.</p></li>
        <li><p>Требуется высокая производительность и масштабируемость (например, в NoSQL базах данных, где используется
            модель <strong>BASE</strong>).</p></li>
    </ul>
    </div>
</body>
</html>
