<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link href="../deepseek.css" rel="stylesheet">

</head>
<body>
<div class="ds-markdown ds-markdown--block" style="--ds-md-zoom: 1.143;"><p><strong>DDD (Domain-Driven Design)</strong> — это подход к разработке программного обеспечения, который фокусируется на создании сложных систем через глубокое понимание предметной области (бизнес-логики). Основная идея — тесное взаимодействие между разработчиками и экспертами предметной области (бизнес-аналитиками, заказчиками) для построения единой модели, которая точно отражает бизнес-процессы.</p><hr><h3><strong>Ключевые концепции DDD</strong>:</h3><ol start="1"><li><p><strong>Ubiquitous Language (Универсальный язык)</strong><br>Единый словарь терминов, понятный как разработчикам, так и бизнес-экспертам. Это позволяет избежать недопонимания и упрощает коммуникацию.</p></li><li><p><strong>Domain Model (Модель предметной области)</strong><br>Абстракция, описывающая ключевые сущности, их взаимодействие и бизнес-правила в рамках конкретной области (например, банковские транзакции, логистика, медицинские записи).</p></li><li><p><strong>Bounded Context (Ограниченный контекст)</strong><br>Четко определенная граница, внутри которой универсальный язык и модель остаются согласованными. Например, "клиент" в контексте продаж и "клиент" в контексте поддержки могут иметь разные атрибуты.</p></li><li><p><strong>Subdomains (Поддомены)</strong><br>Разделение предметной области на части:</p><ul><li><p><strong>Core Domain</strong>: ключевая часть бизнеса (то, что отличает компанию).</p></li><li><p><strong>Supporting Subdomain</strong>: вспомогательные процессы.</p></li><li><p><strong>Generic Subdomain</strong>: стандартные задачи, которые можно решить готовыми решениями.</p></li></ul></li></ol><hr><h3><strong>Архитектурные элементы</strong>:</h3><ul><li><p><strong>Aggregate (<a href="ddd_aggregates.html">Агрегат</a>)</strong>: группа связанных сущностей, которыми управляют как единым целым.</p></li><li><p><strong>Entity (Сущность)</strong>: объект с уникальным идентификатором (например, пользователь с ID).</p></li><li><p><strong>Value Object (Объект-значение)</strong>: объект без идентификатора, определяемый своими атрибутами (например, адрес).</p></li><li><p><strong>Domain Service (Сервис домена)</strong>: логика, которая не относится к конкретной сущности (например, проверка кредитоспособности).</p></li><li><p><strong>Repository (Репозиторий)</strong>: слой для работы с данными (например, доступ к базе).</p></li><li><p><strong>Domain Events (События)</strong>: уведомления о важных изменениях в системе.</p></li></ul><hr><h3><strong>Принципы DDD</strong>:</h3><ul><li><p><strong>Итеративная разработка</strong>: модель постоянно уточняется.</p></li><li><p><strong>Фокус на сложных доменах</strong>: DDD подходит для проектов с запутанной бизнес-логикой.</p></li><li><p><strong>Сотрудничество с экспертами</strong>: разработчики и бизнес-аналитики работают вместе.</p></li></ul><hr><h3><strong>Преимущества</strong>:</h3><ul><li><p>Четкое соответствие кода бизнес-требованиям.</p></li><li><p>Гибкость и масштабируемость.</p></li><li><p>Упрощение поддержки за счет понятной структуры.</p></li></ul><hr><h3><strong>Недостатки</strong>:</h3><ul><li><p>Сложность внедрения для простых проектов.</p></li><li><p>Требует времени на изучение домена.</p></li><li><p>Нужны эксперты предметной области.</p></li></ul><hr><h3><strong>Когда использовать DDD</strong>:</h3><ul><li><p>В проектах с комплексной бизнес-логикой (финансы, здравоохранение, логистика).</p></li><li><p>Когда критически важна точность отражения бизнес-процессов.</p></li></ul><p>Примеры: системы управления заказами, банковские платформы, медицинские информационные системы.</p><p>DDD — это не серебряная пуля, но мощный инструмент для сложных задач, где бизнес-логика играет ключевую роль.</p></div>
<h2>Отличия от ООП</h2>
<div class="ds-markdown ds-markdown--block" style="--ds-md-zoom: 1.143;"><p><strong>DDD (Domain-Driven Design)</strong> и <strong>ООП (Объектно-Ориентированное Программирование)</strong> — это взаимодополняющие, но принципиально разные концепции. Вот их ключевые различия в контексте PHP:</p><hr><h3>1. <strong>Цель и уровень абстракции</strong></h3><ul><li><p><strong>ООП</strong> — это <strong>парадигма программирования</strong>, которая фокусируется на организации кода через объекты, инкапсуляцию, наследование и полиморфизм.<br><strong>Пример в PHP</strong>:</p><div class="md-code-block"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner"><div class="md-code-block-infostring">php</div><div class="md-code-block-action"><div class="ds-markdown-code-copy-button">Copy</div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></li><li><p><strong>DDD</strong> — это <strong>методология проектирования</strong>, которая помогает строить сложные системы, ориентируясь на бизнес-логику и домен (предметную область).<br><strong>Пример</strong>:<br>Разделение кода на слои (доменный, прикладной, инфраструктурный) и использование паттернов вроде <code>AggregateRoot</code>, <code>Value Object</code>.</p></li></ul><hr><h3>2. <strong>Структура и акценты</strong></h3><ul><li><p><strong>ООП</strong> акцентирует внимание на технических аспектах:<br>— Классы, объекты, интерфейсы.<br>— Принципы SOLID, DRY.<br>— Техническая инкапсуляция данных и поведения.</p></li><li><p><strong>DDD</strong> фокусируется на <strong>бизнес-логике</strong>:<br>— Выделение <strong>сущностей</strong> (Entity) и <strong>объектов-значений</strong> (Value Object).<br>— Работа с <strong>агрегатами</strong> (Aggregate) для управления целостностью данных.<br>— Использование <strong>репозиториев</strong> (Repository) для доступа к данным.<br>— Определение <strong>ограниченных контекстов</strong> (Bounded Context) для изоляции доменных моделей.</p></li></ul><hr><h3>3. <strong>Область применения</strong></h3><ul><li><p><strong>ООП</strong> — универсальная парадигма, применима в любом проекте, даже без сложной бизнес-логики.</p></li><li><p><strong>DDD</strong> — используется в <strong>сложных доменных системах</strong> (например, банковские приложения, ERP), где критично точное отражение бизнес-правил в коде.</p></li></ul><hr><h3>4. <strong>Процесс разработки</strong></h3><ul><li><p>В <strong>ООП</strong> код структурируется вокруг технических требований (например, классы для работы с базой данных, UI).</p></li><li><p>В <strong>DDD</strong> разработка начинается с анализа домена:<br>— Тесное взаимодействие с экспертами предметной области.<br>— Построение <strong>единого языка</strong> (Ubiquitous Language) для общения между разработчиками и бизнесом.<br>— Моделирование системы на основе бизнес-процессов.</p></li></ul><hr><h3>5. <strong>Пример различий в PHP</strong></h3><ul><li><p><strong>ООП-подход</strong> (без DDD):</p><div class="md-code-block"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner"><div class="md-code-block-infostring">php</div><div class="md-code-block-action"><div class="ds-markdown-code-copy-button">Copy</div></div></div></div><pre><span class="token keyword">class</span> <span class="token class-name-definition class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword type-declaration">int</span> <span class="token variable">$id</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword type-declaration">float</span> <span class="token variable">$total</span><span class="token punctuation">;</span>
    <span class="token comment">// Методы для работы с базой данных</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// SQL-запросы</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div><p>Здесь бизнес-логика смешана с инфраструктурой (работа с БД).</p></li><li><p><strong>DDD-подход</strong>:</p><div class="md-code-block"><div class="md-code-block-banner-wrap"><div class="md-code-block-banner"><div class="md-code-block-infostring">php</div><div class="md-code-block-action"><div class="ds-markdown-code-copy-button">Copy</div></div></div></div><pre><span class="token comment">// Доменный слой</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name type-declaration">OrderId</span> <span class="token variable">$id</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name type-declaration">Money</span> <span class="token variable">$total</span><span class="token punctuation">;</span>
    <span class="token comment">// Бизнес-методы</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">applyDiscount</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Discount</span> <span class="token variable">$discount</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">total</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">total</span><span class="token operator">-&gt;</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token variable">$discount</span><span class="token operator">-&gt;</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Инфраструктурный слой</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">OrderRepository</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">save</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{</span>
        <span class="token comment">// Отдельная логика сохранения в БД</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div><p>Бизнес-логика изолирована, данные представлены через Value Objects (например, <code>Money</code>).</p></li></ul><hr><h3>6. <strong>Инструменты и паттерны</strong></h3><ul><li><p><strong>ООП</strong> в PHP:<br>— Классы, трейты, интерфейсы.<br>— Наследование, полиморфизм.</p></li><li><p><strong>DDD</strong> добавляет:<br>— Паттерны: CQRS, Event Sourcing, Domain Events.<br>— Слоистая архитектура (Hexagonal Architecture).<br>— Типы данных для домена (например, <code>Email</code>, <code>UserId</code> вместо примитивов).</p></li></ul><hr><h3>Итог:</h3><ul><li><p><strong>ООП</strong> — это <strong>как писать код</strong>, а <strong>DDD</strong> — <strong>как организовать логику</strong> вокруг предметной области.</p></li><li><p>DDD использует ООП как основу, но добавляет дисциплину для работы со сложными бизнес-процессами.</p></li><li><p>В PHP DDD помогает избежать «раздувания» моделей ActiveRecord (как в Laravel Eloquent) и отделить бизнес-логику от инфраструктуры.</p></li></ul></div></body>
</html>
